# APS智慧排产系统 - UX设计文档

## 1. 用户角色定义

### 1.1 主要用户角色

#### 生产调度员（Primary User）
- **角色描述**：负责卷包生产计划的制定和排产工作
- **核心需求**：快速上传计划数据、执行排产算法、查看排产结果、导出工单
- **使用频率**：每日多次使用
- **技术水平**：中等，熟悉生产业务但技术操作能力有限

#### 生产管理员（Secondary User）
- **角色描述**：监控生产计划执行状态，处理异常情况
- **核心需求**：查看排产结果、监控执行状态、处理异常
- **使用频率**：每日使用
- **技术水平**：较高，对系统功能有深入了解

## 2. 核心用户流程设计

### 2.1 主流程：排产作业流程

```
[上传计划文件] → [数据解析入库] → [开始排产] → [规则合并/拆分] → [校正与并行切分] → [生成工单] → [导出到MES]
```

#### 流程详细说明：

**步骤1：上传计划文件**
- 用户点击"上传计划文件"按钮
- 选择Excel文件（APS作业计划表-卷包旬计划.xlsx）
- 系统显示文件上传进度
- 上传完成后显示文件基本信息

**步骤2：数据解析入库**
- 系统自动解析Excel文件内容
- 数据验证（必填字段、数据格式、业务规则校验）
- 显示解析结果和错误信息（如有）
- 用户确认后将数据写入数据库

**步骤3：开始排产**
- 用户点击"开始排产"按钮
- 系统显示排产参数设置界面
- 用户可调整排产策略参数（可选）
- 启动排产算法

**步骤4：规则合并/拆分**
- 系统按照合并规则处理旬计划
- 实时显示处理进度和结果
- 用户可查看合并/拆分详细信息

**步骤5：校正与并行切分**
- 系统执行时间校正和并行计算
- 考虑轮保时间、机台速度等因素
- 显示校正结果和时间安排

**步骤6：生成工单**
- 生成卷包机工单和喂丝机工单
- 用户可预览工单内容
- 支持工单内容调整（如需要）

**步骤7：导出到MES**
- 用户确认工单内容
- 点击"导出到MES"
- 系统生成MES接口文件
- 显示导出结果和状态

### 2.2 辅助流程

#### 数据查看流程
```
[选择查看类型] → [设置筛选条件] → [显示数据列表] → [查看详细信息]
```

#### 异常处理流程
```
[发现异常] → [显示错误信息] → [提供解决方案] → [用户选择处理方式] → [执行处理]
```

## 3. 界面布局设计

### 3.1 主界面布局

```
+----------------------------------------------------------+
|  APS智慧排产系统                    [用户] [设置] [帮助]  |
+----------------------------------------------------------+
|  [首页] [排产作业] [系统配置]      |
+----------------------------------------------------------+
|                                                          |
|  +------------------+  +------------------+             |
|  | 快速操作区        |  | 状态监控区        |             |
|  | - 上传计划文件    |  | - 当前任务状态    |             |
|  | - 开始排产       |  | - 系统运行状态    |             |
|  | - 导出工单       |  |                  |             |
|  +------------------+  +------------------+             |
|                                                          |
|  +--------------------------------------------------+   |
|  | 主要内容区域                                      |   |
|  | - 根据选择的功能模块显示相应内容                    |   |
|  | - 表格、图表、表单等                              |   |
|  +--------------------------------------------------+   |
|                                                          |
+----------------------------------------------------------+
|  状态栏: 系统状态 | 当前用户 | 最后更新时间              |
+----------------------------------------------------------+
```

### 3.2 排产作业界面

```
+----------------------------------------------------------+
|  排产作业 > 卷包旬计划处理                                |
+----------------------------------------------------------+
|                                                          |
|  步骤导航: [1.上传] → [2.解析] → [3.排产] → [4.生成] → [5.导出] |
|                                                          |
|  +--------------------------------------------------+   |
|  | 当前步骤: 上传计划文件                              |   |
|  |                                                    |   |
|  | [选择文件] [_____________________] [上传]          |   |
|  |                                                    |   |
|  | 支持格式: .xlsx                                     |   |
|  | 文件大小: 最大10MB                                  |   |
|  |                                                    |   |
|  | 上传记录:                                           |   |
|  | +------+----------+--------+--------+             |   |
|  | |时间  |文件名    |状态    |操作    |             |   |
|  | +------+----------+--------+--------+             |   |
|  | |14:30 |plan.xlsx |成功    |[查看]  |             |   |
|  | +------+----------+--------+--------+             |   |
|  +--------------------------------------------------+   |
|                                                          |
|  [上一步] [下一步] [取消]                                |
+----------------------------------------------------------+
```

### 3.3 数据解析界面

```
+----------------------------------------------------------+
|  排产作业 > 数据解析                                      |
+----------------------------------------------------------+
|                                                          |
|  步骤导航: [1.上传] → [2.解析] → [3.排产] → [4.生成] → [5.导出] |
|                                                          |
|  +--------------------------------------------------+   |
|  | 解析结果:                                           |   |
|  |                                                    |   |
|  | ✓ 文件格式验证通过                                  |   |
|  | ✓ 数据结构验证通过                                  |   |
|  | ✓ 业务规则验证通过                                  |   |
|  |                                                    |   |
|  | 数据统计:                                           |   |
|  | - 总记录数: 256条                                   |   |
|  | - 有效记录: 256条                                   |   |
|  | - 错误记录: 0条                                     |   |
|  | - 涉及牌号: 12个                                    |   |
|  | - 涉及机台: 6台                                     |   |
|  |                                                    |   |
|  | [查看详细数据] [查看错误信息]                        |   |
|  +--------------------------------------------------+   |
|                                                          |
|  [上一步] [确认并继续] [取消]                            |
+----------------------------------------------------------+
```

### 3.4 排产执行界面

```
+----------------------------------------------------------+
|  排产作业 > 执行排产                                      |
+----------------------------------------------------------+
|                                                          |
|  步骤导航: [1.上传] → [2.解析] → [3.排产] → [4.生成] → [5.导出] |
|                                                          |
|  +--------------------------------------------------+   |
|  | 排产进度:                                           |   |
|  |                                                    |   |
|  | ████████████████████░░░░ 80%                       |   |
|  |                                                    |   |
|  | 当前阶段: 并行切分处理                               |   |
|  |                                                    |   |
|  | 处理日志:                                           |   |
|  | +--------------------------------------------------+ |
|  | | 14:35:12 开始规则合并处理...                      | |
|  | | 14:35:15 合并完成，共处理256条记录                | |
|  | | 14:35:16 开始拆分处理...                          | |
|  | | 14:35:18 拆分完成，生成128个工单                  | |
|  | | 14:35:19 开始校正与并行切分...                    | |
|  | | 14:35:22 正在处理机台JJ#01的时间校正...           | |
|  | +--------------------------------------------------+ |
|  |                                                    |   |
|  | [暂停] [查看详情]                                   |   |
|  +--------------------------------------------------+   |
|                                                          |
|  [上一步] [取消]                                         |
+----------------------------------------------------------+
```

### 3.5 结果查看界面

```
+----------------------------------------------------------+
|  排产结果查看                                             |
+----------------------------------------------------------+
|                                                          |
|  筛选条件: [日期范围] [牌号] [机台] [状态] [搜索]          |
|                                                          |
|  +--------------------------------------------------+   |
|  | 卷包机工单列表                           [导出Excel]  |   |
|  |                                                    |   |
|  | +-------+--------+--------+--------+--------+------+ |
|  | |订单号 |牌号    |机台    |开始时间|结束时间|状态  | |
|  | +-------+--------+--------+--------+--------+------+ |
|  | |W0001  |PA      |JJ#01   |14:00   |17:00   |待执行| |
|  | |W0001  |PA      |JJ#02   |14:00   |17:00   |待执行| |
|  | |W0002  |PA      |JJ#01   |17:00   |20:00   |待执行| |
|  | +-------+--------+--------+--------+--------+------+ |
|  |                                                    |   |
|  | 分页: [<] [1] [2] [3] [>]                          |   |
|  +--------------------------------------------------+   |
|                                                          |
|  +--------------------------------------------------+   |
|  | 喂丝机工单列表                           [导出Excel]  |   |
|  |                                                    |   |
|  | +-------+--------+--------+--------+--------+------+ |
|  | |工单号 |牌号    |机台    |开始时间|结束时间|状态  | |
|  | +-------+--------+--------+--------+--------+------+ |
|  | |F0001  |PA      |FF#01   |14:00   |20:00   |待执行| |
|  | |F0002  |PA      |FF#02   |20:00   |23:00   |待执行| |
|  | +-------+--------+--------+--------+--------+------+ |
|  +--------------------------------------------------+   |
+----------------------------------------------------------+
```

## 4. 交互设计规范

### 4.1 按钮设计规范

- **主要操作按钮**: 蓝色背景，白色文字，圆角4px
- **次要操作按钮**: 灰色边框，黑色文字，圆角4px
- **危险操作按钮**: 红色背景，白色文字，圆角4px
- **禁用按钮**: 灰色背景，浅灰色文字

### 4.2 表格设计规范

- **表头**: 灰色背景，粗体文字
- **斑马纹**: 奇偶行使用不同背景色
- **悬停效果**: 鼠标悬停时行背景变色
- **排序**: 可排序列显示排序图标

### 4.3 表单设计规范

- **必填字段**: 标签后加红色星号(*)
- **输入框**: 边框1px，圆角2px，focus时边框变蓝
- **错误提示**: 红色文字，显示在字段下方
- **成功提示**: 绿色文字或图标

### 4.4 进度指示器

- **步骤导航**: 水平排列，当前步骤高亮
- **进度条**: 百分比显示，颜色渐变
- **加载动画**: 旋转图标或脉冲效果

## 5. 响应式设计

### 5.1 屏幕适配

- **大屏幕(≥1200px)**: 完整布局，侧边栏展开
- **中等屏幕(768-1199px)**: 侧边栏可折叠
- **小屏幕(<768px)**: 移动端布局，垂直排列

### 5.2 触摸优化

- **按钮最小尺寸**: 44px×44px
- **触摸间距**: 元素间距至少8px
- **手势支持**: 滑动翻页，双击放大

## 6. 状态反馈设计

### 6.1 成功状态

- **颜色**: 绿色(#28a745)
- **图标**: ✓ 对勾
- **消息**: 简洁明确的成功信息
- **自动消失**: 3秒后自动隐藏

### 6.2 错误状态

- **颜色**: 红色(#dc3545)
- **图标**: ✗ 错号
- **消息**: 具体的错误原因和解决建议
- **手动关闭**: 用户点击关闭

### 6.3 警告状态

- **颜色**: 橙色(#ffc107)
- **图标**: ⚠ 警告
- **消息**: 需要用户注意的信息
- **确认操作**: 需要用户确认后继续

### 6.4 信息状态

- **颜色**: 蓝色(#007bff)
- **图标**: ℹ 信息
- **消息**: 一般性提示信息
- **自动消失**: 5秒后自动隐藏

## 7. 无障碍设计

### 7.1 键盘导航

- **Tab序列**: 逻辑顺序的tab导航
- **焦点指示**: 清晰的焦点框
- **快捷键**: 常用功能支持快捷键

### 7.2 屏幕阅读器

- **语义标签**: 正确使用HTML语义标签
- **alt文本**: 图片提供描述性alt文本
- **标签关联**: 表单标签正确关联输入框

### 7.3 色彩对比

- **对比度**: 文字与背景对比度≥4.5:1
- **色盲友好**: 不依赖颜色传达重要信息
- **高对比模式**: 支持高对比度主题

## 8. 性能优化

### 8.1 页面加载

- **懒加载**: 非关键内容延迟加载
- **渐进式渲染**: 关键内容优先显示
- **加载指示**: 明确的加载状态提示

### 8.2 数据处理

- **分页加载**: 大数据量分页显示
- **虚拟滚动**: 超长列表使用虚拟滚动
- **缓存策略**: 合理使用缓存减少请求

## 9. 用户体验指标

### 9.1 效率指标

- **任务完成时间**: 完成一次排产作业的时间
- **点击次数**: 完成主要任务的最少点击数
- **错误率**: 用户操作错误的频率

### 9.2 满意度指标

- **易用性评分**: 用户对界面易用性的评价
- **学习成本**: 新用户掌握系统的时间
- **返回率**: 用户继续使用系统的比例

## 10. 迭代优化建议

### 10.1 数据收集

- **用户行为**: 收集用户操作路径和习惯
- **性能数据**: 监控页面加载和响应时间
- **错误日志**: 记录用户遇到的问题

### 10.2 持续改进

- **A/B测试**: 对比不同设计方案效果
- **用户反馈**: 定期收集用户意见和建议
- **版本迭代**: 基于数据和反馈持续优化